### Spring í‘œê¸°ë²•(ê°•ì˜ ê¸°ì¤€)

json íŒŒì¼(Body)ì€ ìŠ¤ë„¤ì´í¬ ì¼€ì´ìŠ¤

í´ëž˜ìŠ¤ëª…ì€ íŒŒìŠ¤ì¹¼ ì¼€ì´ìŠ¤

ë³€ìˆ˜, í•¨ìˆ˜ëª…ì€ ì¹´ë©œ ì¼€ì´ìŠ¤



### ë‹¨ì¶•í‚¤

- alt + Enter: ìˆ˜í–‰í•  actionì„ ë³´ì—¬ì¤Œ(import, replace,...)



# ðŸŒ±TIL

- var: íƒ€ìž… ì¶”ë¡ í•˜ëŠ” ë‹¨ì¶•ëœ ì•½ì–´(ìžë°”11ë¶€í„° ì¶”ê°€)
- dependency
- throws: ì˜ˆì™¸ë˜ì§€ê¸°



### AOP

- Join Point: íƒ€ê²Ÿ ê°ì²´ê°€ êµ¬í˜„í•œ ì¸í„°íŽ˜ì´ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œëŠ” ì¡°ì¸ í¬ì¸íŠ¸ê°€ ëœë‹¤.
- Aspect: AOPì˜ ê¸°ë³¸ ëª¨ë“ˆ, Advice + Pointcut
- Pointcut: Adviceë¥¼ ì ìš©í•  íƒ€ê²Ÿì˜ ë©”ì„œë“œë¥¼ ì„ ë³„í•˜ëŠ” ì •ê·œí‘œí˜„ì‹

> **ë ˆìŠ¤í† ëž‘ ë¹„ìœ ë¥¼ ì‚¬ìš©í•œ ì„¤ëª…**
>
> ì™¸ì‹ í•  ë•Œ ë©”ë‰´ë¥¼ë³´ê³  ì„ íƒí•  ìˆ˜ìžˆëŠ” ëª‡ ê°€ì§€ ì˜µì…˜ì´ í‘œì‹œë©ë‹ˆë‹¤. ë©”ë‰´ì—ìžˆëŠ” í•­ëª© ì¤‘ í•˜ë‚˜ ì´ìƒì„ ì£¼ë¬¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì‹¤ì œë¡œ ì£¼ë¬¸í•˜ê¸° ì „ê¹Œì§€ëŠ” â€œì‹ì‚¬ ê¸°íšŒâ€ì¼ë¿ìž…ë‹ˆë‹¤. ì£¼ë¬¸í•˜ê³  ì›¨ì´í„°ê°€ í…Œì´ë¸”ë¡œ ê°€ì ¸ ì˜¤ë©´ ì‹ì‚¬ìž…ë‹ˆë‹¤.
>
> JoinpointëŠ” ë©”ë‰´ì˜ ì˜µì…˜ì´ê³  Pointcutì€ ì‚¬ìš©ìžê°€ ì„ íƒí•˜ëŠ” í•­ëª©ìž…ë‹ˆë‹¤.
>
> JoinpointëŠ” ì½”ë“œ ë‚´ì—ì„œ ì¸¡ë©´ì„ ì ìš© í•  ìˆ˜ìžˆëŠ” ê¸°íšŒìž…ë‹ˆë‹¤. ê·¸ ê¸°íšŒë¥¼ ìž¡ê³  í•˜ë‚˜ ì´ìƒì˜ Joinpointë¥¼ ì„ íƒí•˜ê³  ê·¸ê²ƒì— ì¸¡ë©´ì„ ì ìš©í•˜ë©´ Pointcutì´ ìžˆìŠµë‹ˆë‹¤.

- Beanì€ Componentì™€ ë‹¤ë¥´ê²Œ í´ëž˜ìŠ¤ì— ë¶™íž ìˆ˜ ì—†ë‹¤. ë©”ì„œë“œì— ê°€ëŠ¥
- @Target(): ì• ë…¸í…Œì´ì…˜ì„ ë¶€ì°©í•  ìˆ˜ ìžˆëŠ” íƒ€ìž… ì§€ì •
- @Retention(): í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì´ ì–¸ì œê¹Œì§€ ìœ ì§€ë  ìˆ˜ ìžˆëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ì• ë…¸í…Œì´ì…˜

- Thread.sleep(): ì‹¤í–‰ ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ ìž ì‹œ ë©ˆì¶˜ë‹¤



### object mapper

- jackson-databind (2.12.1)

> JSON Validator ì‚¬ì´íŠ¸

- @JsonProperty()
- JsonNode: Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” JSONì„ í‘œí˜„í•˜ê¸° ìœ„í•œ ì¶”ìƒ í´ëž˜ìŠ¤

- ArrayNode: Jsonì˜ node ì¤‘ì— ë°°ì—´ í˜•íƒœë¡œ ê°’ì´ ë“¤ì–´ê°€ìžˆëŠ” ë…¸ë“œì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ í´ëž˜ìŠ¤
- convertValue: objectë¥¼ ì›í•˜ëŠ” typeìœ¼ë¡œ ë°”ê¿”ì„œ íŒŒì‹±í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ



### Spring Boot Annotations

| Annotation             | ì˜ë¯¸                                                         |
| ---------------------- | ------------------------------------------------------------ |
| @SpringBootApplication | Spring boot applicationìœ¼ë¡œ ì„¤ì •                             |
| @Controller            | Viewë¥¼ ì œê³µí•˜ëŠ” controllerë¡œ ì„¤ì •                            |
| @RestController        | REST APIë¥¼ ì œê³µí•˜ëŠ” controllerë¡œ ì„¤ì •                        |
| @RequestMapping        | URL ì£¼ì†Œë¥¼ ë§µí•‘(ì›í•˜ëŠ” Http method ì§€ì •í•´ì•¼í•¨)               |
| @GetMapping            | Http GetMethod URL ì£¼ì†Œ ë§µí•‘                                 |
| @PostMapping           | Http PostMethod URL ì£¼ì†Œ ë§µí•‘                                |
| @PutMapping            | Http PutMethod URL ì£¼ì†Œ ë§µí•‘                                 |
| @DeleteMapping         | Http DeleteMethod URL ì£¼ì†Œ ë§µí•‘                              |
| @RequestParam          | URL Query Parameter ë§µí•‘                                     |
| @RequestBody           | Http Bodyë¥¼ Parsing ë§µí•‘                                     |
| @Valid                 | POJO Java classì˜ ê²€ì¦                                       |
| @Configration          | 1ê°œ ì´ìƒì˜ beanì„ ë“±ë¡ í•  ë•Œ ì„¤ì •                            |
| @Component             | 1ê°œì˜ Class ë‹¨ìœ„ë¡œ ë“±ë¡í•  ë•Œ ì‚¬ìš©                            |
| @Bean                  | 1ê°œì˜ ì™¸ë¶€ libraryë¡œë¶€í„° ìƒì„±í•œ ê°ì²´ë¥¼ ë“±ë¡ ì‹œ ì‚¬ìš©(Classì—ëŠ” ì‚¬ìš©X) |
| @AutoWired             | DIë¥¼ ìœ„í•œ ê³³ì— ì‚¬ìš©                                          |
| @Qualifier             | @AutoWired ì‚¬ìš©ì‹œ beanì´ 2ê°œ ì´ìƒì¼ ë•Œ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©       |
| @Resource              | @AutoWired + @Qualifier ì˜ ê°œë…ìœ¼ë¡œ ì´í•´                     |
| @Aspect                | AOP ì ìš©ì‹œ ì‚¬ìš©                                              |
| @Before                | AOP ë©”ì†Œë“œ ì´ì „ í˜¸ì¶œ ì§€ì •                                    |
| @After                 | AOP ë©”ì†Œë“œ í˜¸ì¶œ ì´í›„ ì§€ì • (ì˜ˆì™¸ ë°œìƒ í¬í•¨)                   |
| @Around                | AOP ì´ì „/ì´í›„ ëª¨ë‘ í¬í•¨ (ì˜ˆì™¸ ë°œìƒ í¬í•¨)                     |
| @AfterReturning        | AOP ë©”ì†Œë“œì˜ í˜¸ì¶œì´ ì •ìƒì¼ ë•Œ ì‹¤í–‰                           |
| @AfterThrowing         | AOPì‹œ í•´ë‹¹ ë©”ì†Œë“œê°€ ì˜ˆì™¸ ë°œìƒì‹œ ì‹¤í–‰ë˜ë„ë¡ ì§€ì •              |



### Validation

í”„ë¡œê·¸ëž˜ë°ì— ìžˆì–´ì„œ ê°€ìž¥ í•„ìš”í•œ ë¶€ë¶„. íŠ¹ížˆ Javaì—ì„œëŠ” nullê°’ì— ëŒ€í•´ì„œ ì ‘ê·¼í•˜ë ¤ê³  í•  ë•Œ null pointer exceptionì´ ë°œìƒí•¨ìœ¼ë¡œ, ì´ëŸ¬í•œ ë¶€ë¶„ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ ë¯¸ë¦¬ ê²€ì¦í•˜ëŠ” ê³¼ì •ì„ Validationì´ë¼ê³  í•œë‹¤.

1. ê²€ì¦í•´ì•¼ í•  ê°’ì´ ë§Žì€ ê²½ìš° ì½”ë“œì˜ ê¸¸ì´ê°€ ê¸¸ì–´ì§„ë‹¤.
2. êµ¬í˜„ì— ë”°ë¼ì„œ ë‹¬ë¼ì§ˆ ìˆ˜ ìžˆì§€ë§Œ Service Logicê³¼ì˜ ë¶„ë¦¬ê°€ í•„ìš”í•˜ë‹¤
3. í©ì–´ì ¸ ìžˆëŠ” ê²½ìš° ì–´ë””ì—ì„œ ê²€ì¦ì„ í•˜ëŠ”ì§€ ì•Œê¸° ì–´ë ¤ìš°ë©°, ìž¬ì‚¬ìš©ì˜ í•œê³„ê°€ ìžˆë‹¤.
4. êµ¬í˜„ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìžˆì§€ë§Œ, ê²€ì¦ Logicì´ ë³€ê²½ë˜ëŠ” ê²½ìš° í…ŒìŠ¤íŠ¸ ì½”ë“œ ë“± ì°¸ì¡°í•˜ëŠ” í´ëž˜ìŠ¤ì—ì„œ 

| @Size               | ë¬¸ìž ê¸¸ì´ ì¸¡ì •              | Int Type ë¶ˆê°€               |
| ------------------- | --------------------------- | --------------------------- |
| @NotNull            | null ë¶ˆê°€                   |                             |
| @NotEmpty           | null, "" ë¶ˆê°€               |                             |
| @NotBlank           | null, "", " " ë¶ˆê°€          |                             |
| @Past               | ê³¼ê±° ë‚ ì§œ                   |                             |
| @PastOrPresent      | ì˜¤ëŠ˜ì´ê±°ë‚˜ ê³¼ê±° ë‚ ì§œ        |                             |
| @Future             | ë¯¸ëž˜ ë‚ ì§œ                   |                             |
| @FutureOrPresent    | ì˜¤ëŠ˜ì´ê±°ë‚˜ ë¯¸ëž˜ ë‚ ì§œ        |                             |
| @Pattern            | ì •ê·œì‹ ì ìš©                 |                             |
| @Max                | ìµœëŒ€ê°’                      |                             |
| @Min                | ìµœì†Œê°’                      |                             |
| @AssertTrue / False | ë³„ë„ Logic ì ìš©             | methodê°€ isë¡œ ì‹œìž‘í•´ì•¼í•œë‹¤. |
| @Valid              | í•´ë‹¹ object validation ì‹¤í–‰ |                             |

â‘  gradle dependecies

â€‹	implementation 'org.springframework.boot:spring-boot-starter-validation'

â‘¡ bean validation spec

â€‹	https://beanvalidation.org/2.0-jsr380/

â‘¢ í•¸ë“œí°ë²ˆí˜¸ ì •ê·œì‹

â€‹	"``^\\d{2, 3}-\\d{3, 4}-\\d{4}$``"



- ResponseEntity: ì‚¬ìš©ìžì˜ HttpRequestì— ëŒ€í•œ ì‘ë‹µ ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” í´ëž˜ìŠ¤(HttpStatus, HttpHeaders, HttpBodyë¥¼ í¬í•¨)
- BindingResult: ê²€ì¦ ì˜¤ë¥˜ê°€ ë°œìƒí•  ê²½ìš° ì˜¤ë¥˜ ë‚´ìš©ì„ ë³´ê´€í•˜ëŠ” ê°ì²´



### Custom Validation

1. AssertTrue / Falseì™€ ê°™ì€ method ì§€ì •ì„ í†µí•´ Custom Logic ì ìš© ê°€ëŠ¥
2. ConstraintValidatorë¥¼ ì ìš©í•˜ì—¬ ìž¬ì‚¬ìš©ì´ ê°€ëŠ¥í•œ Custom Logic ì ìš© ê°€ëŠ¥



- @Constraint: annotationì„ Bean Validation Constraintë¡œ ë§Œë“¤ì–´ ì£¼ëŠ” annotation



### Exception ì²˜ë¦¬

Web Applicationì˜ ìž…ìž¥ì—ì„œ ë°”ë¼ë³´ì•˜ì„ë•Œ, ì—ëŸ¬ê°€ ë‚¬ì„ ë•Œ ë‚´ë ¤ì¤„ ìˆ˜ ìžˆëŠ” ë°©ë²•ì€ ë§Žì§€ ì•Šë‹¤.

1. ì—ëŸ¬ íŽ˜ì´ì§€
2. 4XX Error or 5XX Error
3. Clientê°€ 200 ì™¸ì— ì²˜ë¦¬ë¥¼ í•˜ì§€ ëª»í•  ë•ŒëŠ” 200ì„ ë‚´ë ¤ì£¼ê³  ë³„ë„ì˜ ì—ëŸ¬ ë©”ì„¸ì§€ ì „ë‹¬

| @ControllerAdvice | Global ì˜ˆì™¸ ì²˜ë¦¬ ë° íŠ¹ì • package / Controller ì˜ˆì™¸ì²˜ë¦¬ |
| ----------------- | ------------------------------------------------------ |
| @ExceptionHandler | íŠ¹ì • Controllerì˜ ì˜ˆì™¸ì²˜ë¦¬                             |



- intì™€ integer: intëŠ” nullë¡œ ì´ˆê¸°í™”í•  ìˆ˜ ì—†ê³  ì‚°ìˆ ì—°ì‚° ê°€ëŠ¥, integerëŠ” ì‚°ìˆ  ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ null ê°’ ì²˜ë¦¬ê°€ ìš©ì´í•˜ë‹¤.
- e.getlocalizedmessageì™€ e.getMessage: ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆ catch ë¸”ë¡ì—ì„œ ë°œìƒí•˜ëŠ” ë©”ì‹œì§€ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ë‘ ê°€ì§€ ë©”ì„œë“œë¥¼ ì‚¬ìš©. getlocalizedmessageëŠ” í˜„ì§€ ì–¸ì–´ë¡œ ì˜ˆì™¸ ì´ë¦„ì„ ë°˜í™˜í•œë‹¤.
- @MethodArgumentNotValidException: @Valid ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê²€ì¦í•˜ê³ , í•´ë‹¹ ë°ì´í„°ì— ì—ëŸ¬ê°€ ìžˆì„ ê²½ìš° ì˜ˆì™¸ ë©”ì„¸ì§€ë¥¼ JSONìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ExceptionHandler ì²˜ë¦¬ ë°©ë²•
- @RestController: @Controllerì— @ResponseBodyê°€ ê²°í•©ëœ annotation. @Controllerì™€ ë‹¬ë¦¬ @RestControllerëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í´ëž˜ìŠ¤ì˜ ê° ë©”ì„œë“œë§ˆë‹¤ @ResponseBodyë¥¼ ì¶”ê°€í•  í•„ìš”ê°€ ì—†ë‹¤.

- getRejectValue(): í•„ë“œ ì˜¤ë¥˜, ì¦‰ íŠ¹ì • í•„ë“œ ê°’ì„ ê±°ë¶€í•˜ëŠ” ì´ìœ ë¥¼ ìº¡ìŠí™”í•œë‹¤.



### Filter-Interceptor

Filterëž€ Web Applicationì—ì„œ ê´€ë¦¬ë˜ëŠ” ì˜ì—­ìœ¼ë¡œì¨ Spring Boot Frameworkì—ì„œ Clientë¡œ ë¶€í„° ì˜¤ëŠ” ìš”ì²­/ì‘ë‹µì— ëŒ€í•´ì„œ ìµœì´ˆ/ìµœì¢… ë‹¨ê³„ì˜ ìœ„ì¹˜ì— ì¡´ìž¬í•˜ë©°, ì´ë¥¼ í†µí•´ì„œ ìš”ì²­/ ì‘ë‹µì˜ ì •ë³´ë¥¼ ë³€ê²½í•˜ê±°ë‚˜, Springì— ì˜í•´ì„œ ë°ì´í„°ê°€ ë³€í™˜ë˜ê¸° ì „ì˜ ìˆœìˆ˜í•œ Clientì˜ ìš”ì²­/ ì‘ë‹µ ê°’ì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.

ìœ ì¼í•˜ê²Œ ServletRequest, ServletResponseì˜ ê°ì²´ë¥¼ ë³€í™˜í•  ìˆ˜ ìžˆë‹¤.

ì£¼ë¡œ Spring Frameworkì—ì„œëŠ” request/responseì˜ Logging ìš©ë„ë¡œ í™œìš©í•˜ê±°ë‚˜, ì¸ì¦ê³¼ ê´€ë ¨ëœ Logicë“¤ì„ í•´ë‹¹ Filterì—ì„œ ì²˜ë¦¬í•œë‹¤.

ì´ë¥¼ ì„ /í›„ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨, Service business logicê³¼ ë¶„ë¦¬ ì‹œí‚¨ë‹¤.

- Lombok: annotationì„ í†µí•´ getter, setter, toString ëª¨ë‘ ìƒì„± ê°€ëŠ¥
- Slf4j: ë¡œê¹…ì— ëŒ€í•œ ì¶”ìƒ ë ˆì´ì–´ë¥¼ ì œê³µí•˜ëŠ” ì¸í„°íŽ˜ì´ìŠ¤ì˜ ëª¨ìŒ. System.outì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ consoleì— ë³´ê¸° ì¢‹ê²Œ logê°€ ì°ížˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤.

- Servlet: ì›¹ í”„ë¡œê·¸ëž˜ë°ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì²˜ë¦¬ ê²°ê³¼ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡í•˜ëŠ” ê¸°ìˆ . ìžë°”ë¡œ êµ¬í˜„ëœ CGI(Common gateway Interface)
  - í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ëŒ€í•´ ë™ì ìœ¼ë¡œ ìž‘ë™í•˜ëŠ” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì»´í¬ë„ŒíŠ¸
  - htmlì„ ì‚¬ìš©í•´ì„œ ìš”ì²­ì— ì‘ë‹µí•œë‹¤
  - Java threadë¥¼ í†µí•´ ë™ìž‘í•œë‹¤
  - MVCíŒ¨í„´ ì¤‘ Controllerë¡œ ì´ìš©ëœë‹¤




## ðŸ’¡ì—ëŸ¬

â—`Identify and stop the process that's listening on port 8080` ì—ëŸ¬

ì²«ë²ˆì§¸ ë°©ë²•,

1ë‹¨ê³„: ëª…ë ¹ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Windowsì—ì„œ í”„ë¡œì„¸ìŠ¤ ID ì°¾ê¸°

ex) netstat -ano | findstr 8080

2ë‹¨ê³„: ëª…ë ¹ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ

ex) taskkill /F /PID 19788



ë‘ë²ˆì§¸ ë°©ë²•,

application.propertiesíŒŒì¼ì—ì„œ server.port=9090 ìž…ë ¥

(port ë²ˆí˜¸ë¥¼ ë°”ê¾¸ìž)





## â“ì§ˆë¬¸

```
// JSON ë‚´ë ¤ì£¼ê¸°
// req -> object mapper -> object -> method -> object -> object mapper -> json -> response
```

```
ContentCachingRequestWrapper
HttpServletResponse
HttpServletRequest
```

