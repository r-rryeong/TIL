## Foreign Key

### Comment CREATE

- Foreign key 개념

  외래키(FK; 외부키)

  한 테이블의 필드 중 다른 테이블의 행을 식별할 수 있는 키

  참조하는 테이블에서 속성에 해당하고, 이는 참조되는 테이블의 기본키를 가리킴

  참조하는 테이블의 외래키는 참조되는 테이블 행 1개에 대응됨

  참조하는 테이블의 행 여러 개가 참조되는 테이블의 동일한 행을 참조할 수 있음

  1:N ⇒ 외래키는 N이! (댓글이 글에 대한 정보를 가지고 있음)

- Foreign key 특징

  키를 사용하여 부모 테이블의 유일한 값을 참조(참조 무결성)

  반드시 부모 테이블의 기본키일 필요는 없지만 유일한 값이어야함

  참조 무결성이란?

  2개의 테이블 간의 일관성

  부모 테이블의 기본키 값으로 존재해야함

- Foreign key field

  2개의 위치 인자가 반드시 필요

  1. 참조하는 model class

  2. ⭐on_delete 옵션

     외래키가 참조한는 객체가 사라졌을 때 외래키를 가진 객체를 어떻게 처리할지

     CASCADE: 부모 객체(참조된 객체)가 삭제됐을 때 이를 참조하는 객체도 삭제

     PORTECT

     SET_NULL

     SET_DEFAULT

- 데이터베이스의 Foreign key 표현

  Foreign key 인스턴스를 abcd로 생성했다면 **abcd_id**로 만들어짐

  명시적인 모델 관계를 파악하기 위해 참조하는 클래스 이름의 단수형으로 작성(1:N)

- 1:N 관계 related manager

  - 역참조('comment_set')

    Article(1) → Comment(N)

    실제로 Article 클래스는 comment와의 어떠한 관계도 작성되어있지 않음

  - 참조('article')

    

### Comment READ



- User 모델 참조하기

  1. settings.AUTH_USER_MODEL

     반환값 str

     models.py에서 User 모델을 참조할 때 사용

  2. get_user_model()

     반환값 object

     models.py가 아닌 다른 곳에서 유저 모델을 참조할 때 사용





----------------

### DB02 summary

FK

참조무결성

fk 필수인자 2개

_id

on_delete 위에 4개

무결성 유형

참조와 역참조⭐

related_name

commit=False

get_user_model()⭐

user 모델 참조하기 1, 2